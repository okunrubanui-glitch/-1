#include <iostream>
#include <string>
#include <sstream> 
#include <stdexcept> 
#include <clocale>   

class Complex {
private:
    double a;
    double b;

public:
    Complex() : a(0.0), b(0.0) {}
    Complex(double real, double imag) : a(real), b(imag) {}

    void Init(double real, double imag) {
        this->a = real;
        this->b = imag;
    }

    void Read() {
        std::cout << "Введіть дійсну частину (a): ";
        std::cin >> this->a;
        std::cout << "Введіть уявну частину (b): ";
        std::cin >> this->b;
    }

    void Display() {
        std::cout << this->toString() << std::endl;
    }

    std::string toString() {
        std::stringstream ss;
        ss << this->a;

        if (this->b > 0) {
            ss << " + " << this->b << "i";
        }
        else if (this->b < 0) {
            ss << " - " << -this->b << "i";
        }

        return ss.str();
    }

    Complex add(const Complex& other) {
        double new_a = this->a + other.a;
        double new_b = this->b + other.b;
        return Complex(new_a, new_b);
    }

    Complex sub(const Complex& other) {
        double new_a = this->a - other.a;
        double new_b = this->b - other.b;
        return Complex(new_a, new_b);
    }

    Complex mul(const Complex& other) {
        double new_a = (this->a * other.a) - (this->b * other.b);
        double new_b = (this->a * other.b) + (this->b * other.a);
        return Complex(new_a, new_b);
    }

    Complex div(const Complex& other) {
        double denominator = (other.a * other.a) + (other.b * other.b);

        if (denominator == 0) {
            throw std::runtime_error("Ділення на нульове комплексне число (0+0i)");
        }

        double num_real = (this->a * other.a) + (this->b * other.b);
        double num_imag = (this->b * other.a) - (this->a * other.b);

        return Complex(num_real / denominator, num_imag / denominator);
    }

    bool equ(const Complex& other) {
        return (this->a == other.a) && (this->b == other.b);
    }

    Complex conj() {
        return Complex(this->a, -this->b);
    }
};


int main() {
    setlocale(LC_ALL, "uk_UA.UTF-8");

    Complex c1, c2;

    c1.Init(5.0, 3.0);
    std::cout << "c1 (після Init): ";
    c1.Display();

    c2.Read();
    std::cout << "c2 (після Read): ";
    c2.Display();


    Complex c_add = c1.add(c2);
    std::cout << "c1 + c2 = ";
    c_add.Display();

    Complex c_sub = c1.sub(c2);
    std::cout << "c1 - c2 = ";
    c_sub.Display();

    Complex c_mul = c1.mul(c2);
    std::cout << "c1 * c2 = ";
    c_mul.Display();

    try {
        Complex c_div = c1.div(c2);
        std::cout << "c1 / c2 = ";
        c_div.Display();
    }
    catch (const std::runtime_error& e) {
        std::cerr << "Помилка ділення: " << e.what() << std::endl;
    }

    std::cout << "\nc1 == c2? " << (c1.equ(c2) ? "Так" : "Ні") << std::endl;

    Complex c3(5.0, 3.0);
    std::cout << "c1 == (5 + 3i)? " << (c1.equ(c3) ? "Так" : "Ні") << std::endl;

    Complex c1_conj = c1.conj();
    std::cout << "Сполучене до c1 = ";
    c1_conj.Display();

    std::cout << "\nc2.Результат: " << c2.toString() << std::endl;

    return 0;
}
